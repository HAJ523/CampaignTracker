<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Campaign Tracker</title>
    <link rel="shortcut icon" type="image/png" href="IMG/CT.ico">
    <!-- External Scripts -->
    <script src="LIB\discord.11.4.2.min.js"></script>
    <!-- Scripts  -->
    <script src="JS\Markdown.js"></script>
    <script src="JS\CampaignTracker.js"></script>
    <script src="JS\Journal.js"></script>
    <script src="JS\Storage.js"></script>
    <script src="JS\Keyboard.js"></script>
    <script src="JS\Roller.js"></script>
    <script src="JS\QuickNotes.js"></script>
    <script src="JS\Messaging.js"></script>

    <!-- External CSS -->
    <link rel="stylesheet" type="text/css" href="CSS\W3.css">
    <link rel="stylesheet" type="text/css" href="CSS\themes\w3-teal.css" id="theme">
    <link rel="stylesheet" type="text/css" href="CSS\fontawesome-all.min.css">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="CSS\CT.css">
  </head>
  <body onload="CT.onLoad();">
    <div class="l-fit-height"> <!---->
      <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-display-container w3-theme-d3">
            <div>
              <div class="w3-dropdown-hover w3-theme-d3">
                <button class="w3-button w3-padding-small fa fa-bars"></button>
                <div class="w3-dropdown-content w3-card-4 w3-bar-block">
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.saveData();"><span class="fa fa-save"></span> Save</a>
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.prompt(CT.loadData,'Load Campaign','What campaign do you wish to load?','Campaign','Campaign Name');"><span class="fa fa-folder-open"></span> Load</a>
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.exportData();"><span class="fa fa-download"></span> Export</a>
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.importData();"><span class="fa fa-upload"></span> Import</a><input type="file" id="ifLoad" onchange="CT.readFile(event);" accept=".json" style="display:none;"></input>
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.settings();"><span class="fa fa-cog"></span> Settings</a>
                  <a class="w3-bar-item w3-button w3-padding-small w3-small" href="javascript:CT.changeDisplay('Help');" title=""><span class="fa fa-question"></span> Help</a>
                </div>
              </div>
              <strong><a class="w3-bar-item" id="title">Campaign Tracker</a></strong>
            </div>
            <div class="w3-display-middle w3-small"><span id="PageTitle"></span> <a href="javascript:CT.editPage();" class="fas fa-scroll"></a></div>
            <div class="w3-display-right" id="IGClock">Cal</div>
          </div>
        </div>
      </section>
      <section class="l-fit-height-row-expanded">
        <div class="l-fit-height-row-content l-scroll">
          <div class="l-scroll-content">
            <div class="w3-row" style="height:100%;">
              <div class="w3-display-container w3-col w3-card-4" style="width:15%;height:100%;display:flex;flex-direction:column;">
                <div class="w3-display-container w3-theme-d1 w3-center">
                  <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-small" title="Forward">&nbsp;<span class="fas fa-arrow-left"></span>&nbsp;</a>
                  <a href="javascript:CT.prompt(CT.newPage,'New Page','Enter the full page path and name:','Page Path','Ex. \'Parent/Sub Parent/Page Name\'');" class="w3-bar-item w3-button w3-padding-small" title="New">&nbsp;<span class="fas fa-plus"></span>&nbsp;</a>
                  <a href="javascript:CT.changeView('J');" class="w3-bar-item w3-button w3-padding-small" title="Journal">&nbsp;<span class="fas fa-book"></span>&nbsp;</a>
                  <a href="javascript:CT.changeView('E');" class="w3-bar-item w3-button w3-padding-small" title="Encounter">&nbsp;<span class="fas fa-chess-pawn"></span>&nbsp;</a>
                  <a href="javascript:CT.changeView('M');" class="w3-bar-item w3-button w3-padding-small" title="Map">&nbsp;<span class="fas fa-map"></span>&nbsp;</a>
                  <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-small" title="Back">&nbsp;<span class="fas fa-arrow-right"></span>&nbsp;</a>
                </div>
                <div class="w3-display-container">
                  <!-- Journal Controls -->
                  <div class="w3-center w3-tiny subMenu">
                    <div class="w3-dropdown-hover" style="background: #FFF;">
                      <a href="javascript:void(0);" class="w3-button w3-padding-small" title="Header"><span class="fas fa-heading"></span></a>
                      <div class="w3-dropdown-content w3-card">
                        <a href="javascript:JL.headerText(JL.el, 1);" class="w3-button w3-padding-small" title="Header"><strong>1</strong></a>
                        <a href="javascript:JL.headerText(JL.el, 2);" class="w3-button w3-padding-small" title="Header"><strong>2</strong></a>
                        <a href="javascript:JL.headerText(JL.el, 3);" class="w3-button w3-padding-small" title="Header"><strong>3</strong></a>
                        <a href="javascript:JL.headerText(JL.el, 4);" class="w3-button w3-padding-small" title="Header"><strong>4</strong></a>
                        <a href="javascript:JL.headerText(JL.el, 5);" class="w3-button w3-padding-small" title="Header"><strong>5</strong></a>
                        <a href="javascript:JL.headerText(JL.el, 6);" class="w3-button w3-padding-small" title="Header"><strong>6</strong></a>
                      </div>
                    </div>
                    <a href="javascript:JL.boldText(JL.el);" class="w3-button w3-padding-small" title="Bold"><span class="fas fa-bold"></span></a>
                    <a href="javascript:JL.italicText(JL.el);" class="w3-button w3-padding-small" title="Italic"><span class="fas fa-italic"></span></a>
                    <a href="javascript:JL.underlineText(JL.el);" class="w3-button w3-padding-small" title="Underline"><span class="fas fa-underline"></span></a>
                    <a href="javascript:JL.strikethroughText(JL.el);" class="w3-button w3-padding-small" title="Strikethrough"><span class="fas fa-strikethrough"></span></a>
                    <a href="javascript:JL.insertTab(JL.el);" class="w3-button w3-padding-small" title="Insert Tab"><span class="fas fa-indent"></span></a>
                    <br/>
                    <a href="javascript:JL.listText(JL.el, '+');" class="w3-button w3-padding-small" title="Ordered List"><span class="fas fa-list-ol"></span></a>
                    <a href="javascript:JL.listText(JL.el, '*');" class="w3-button w3-padding-small" title="Unordered List"><span class="fas fa-list"></span></a>
                    <a href="javascript:JL.horizontalRule(JL.el);" class="w3-button w3-padding-small" title="Horizontal Rule"><span class="far fa-window-minimize"></span></a>
                    <a href="javascript:JL.insertTable(JL.el, 3, 3);" class="w3-button w3-padding-small" title="Insert Table"><span class="fas fa-table"></span></a> <!--TODO add dropdown table size selector -->
                    <a href="javascript:JL.blockquoteText(JL.el);" class="w3-button w3-padding-small" title="Quote"><span class="fas fa-quote-right"></span></a>
                  </div>
                </div>
                <div class="w3-display-container w3-padding-small">
                  <input type="text" class="w3-input w3-small w3-padding-small" placeholder="Search...">
                </div>
                <div id="PageTree" class="w3-tiny l-fit-height-row-expanded" style="overflow-y:auto;overflow-x:hidden;">
                    <ol></ol>
                </div>
              </div>
              <!-- Map -->
              <div class="w3-container w3-padding-small w3-rest viewM w3-hide"><canvas id="MapCanvas" class="w3-card" style="height:100%;width:100%;"></canvas></div>
              <!-- Journal -->
              <div class="w3-container w3-col w3-padding-small w3-hide viewJ" style="height:100%;width:30%;"><textarea class="w3-small w3-textarea w3-card" style="height:100%;width:100%;" onkeydown="KB.markdownShortcut(event);" oninput="JL.updateJournalDisplay();" id="JournalEditor"></textarea></div>
              <div class="w3-container w3-display-container w3-rest w3-padding-small w3-hide viewJ" style="height:100%;">
                <div id="JournalDisplay" class="w3-padding-small w3-card" style="height:100%;width:100%;overflow-y: auto;"></div>
                <div id="JournalIndex" class="w3-border w3-border-theme w3-display-topright w3-margin w3-tiny w3-hide">Header</div><!--TODO update this to be useful. Needs style & functionality. -->
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-row">
            <div class="w3-rest w3-theme w3-display-container">
              <div class="w3-left"> <!-- TODO allow this to be a drop up with past statuses listed! -->
                <span class="w3-tiny w3-cell-middle" id="StatusTime">&nbsp;</span>
                <span id="Status"> Ready</span></div>
              <div class="w3-right" id="IRLClock"></div>
              <div class="w3-display-middle">
                <a href="javascript:QN.newNote();" class="w3-button far fa-edit"></a>
                <span id="QuickNotesList">

                </span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Modals Below This Line -->
    <!-- Prompt -->
    <div id="ModalPrompt" class="w3-modal w3-animate-opacity w3-hide">
      <div class="w3-modal-content w3-card-4 w3-animate-top">
        <header class="w3-display-container w3-text-theme w3-xlarge w3-padding-small"><strong id="ModalPromptTitle">Test</strong></header>
        <div class="w3-container">
          <span id="ModalPromptText">Here is some default text.</span><br/>
          <input type="text" class="w3-input" id="ModalPromptResponse" onkeydown="KB.prompt(event);"><label id="ModalPromptLabel" class="w3-small">Default Label</label>
        </div>
        <footer class="w3-container w3-padding-small">
          <div class="w3-right">
            <a class="w3-button" href="javascript:CT.promptClose(0);">Cancel</a>
            <a class="w3-button" href="javascript:CT.promptClose(1);">Ok</a>
          </div>
        </footer>
      </div>
    </div>

    <!-- Notes Container-->
    <div id="Notes" style="position:absolute; perspective:2000px; top:0px;left:0px;">
      <div class="w3-modal-content-mobile w3-card-4 w3-hide" style="top:100px;left:100px;z-index:10;" id="QuickNoteTemplate" title="0">
        <section style="height:100%;width:100%;display:flex;flex-flow:column;">
        <header class="w3-theme-d3 w3-display-container" style="user-select:none;" id="QuickNoteTemplateHeader">
          <div class="w3-left">
            &nbsp;<a href="javascript:void(0);" class="fas fa-sync" title="Edit/View"></a>
          </div>
          <span id="NoteTitle" class="w3-display-middle" style="pointer-events: none;"></span>
          <div class="w3-right">
            <a href="javascript:void(0);" class="far fa-window-minimize" title="Minimize"></a>
            <a href="javascript:void(0);" class="far fa-trash-alt" title="Delete"></a>&nbsp;
          </div>
        </header>
        <div style="flex:2;" class="CT-QNEditor">
          <textarea onkeydown="KB.markdownShortcut(event);" class="w3-textarea w3-small" style="height:100%;"></textarea>
        </div>
        <div style="flex:2;overflow: auto;" class="CT-QNDisplay w3-hide w3-small"></div>
        </section>
      </div>
    </div>

    <!-- Page Settings -->
    <div id="PageSettings" class="w3-modal w3-animate-opacity w3-hide" >
      <div class="w3-modal-content w3-card-4 w3-animate-top">
        <header class="w3-display-container w3-text-theme w3-xlarge w3-padding-small"><strong>Page Settings</strong></header>
        <div class="w3-container w3-modal-contained-height">
          <span>Full Page Path:</span><br/>
          <input type="text" class="w3-input" id="PageSettingsPath"><label class="w3-small">(Example: Templates/NPC)</label>
          <div class="w3-container w3-padding w3-large w3-center w3-text-grey">
            Map Settings
          </div>
          <span>Map Size:</span><br/>
          <div class="w3-row">
            <div class="w3-half w3-margin-small">
              <input type="text" class="w3-input" id="PageSettingsWidth"><label class="w3-small">Width</label>
            </div>
            <div class="w3-rest w3-margin-small">
              <input type="text" class="w3-input" id="PageSettingsHeight"><label class="w3-small">Height</label>
            </div>
          </div>
        </div>
        <footer class="w3-container w3-padding-small">
          <div class="w3-right">
            <a class="w3-button" href="javascript:CT.deletePage();">Delete</a>
            <a class="w3-button" href="javascript:CT.cancelPage();">Cancel</a>
            <a class="w3-button" href="javascript:CT.settingsPage();">Ok</a>
          </div>
        </footer>
      </div>
    </div>

    <!-- Campaign Settings -->
    <div id="CampaignSettings" class="w3-modal w3-animate-opacity w3-hide" >
      <div class="w3-modal-content w3-card-4 w3-animate-top">
        <header class="w3-display-container w3-text-theme w3-xlarge w3-padding-small"><strong>Campaign Settings</strong></header>
        <div class="w3-container w3-modal-contained-height">
          <div class="w3-container w3-padding w3-large w3-center w3-text-grey">
            Main
          </div>
          <div class="w3-container w3-padding">
            <input type="text" class="w3-input" id="csName" title="The name of the campaign. This will&#013;influence the save file name."></input>
            <label class="w3-text-grey w3-small" for="csName">Campaign Name</label>
            <input type="text" class="w3-input" id="csDefaultDice" title="When adding a roll link this will be&#013;added to the beginning of rolls which&#013;start with -/+ to make them valid rolls.&#013;(Ex. '1d20' or '2d6')"></input>
            <label class="w3-text-grey w3-small"for="csDefaultDice">Default Dice</label>
          </div>
          <div class="w3-container w3-padding w3-large w3-center w3-text-grey">
            Discord Connection
          </div>
          <div class="w3-container w3-padding">
            <input type="text" class="w3-input" id="csDiscordClient" title="The client id for the discord bot."></input>
            <label = class="w3-text-grey w3-small" for="csDiscordClient">Discord Client ID</label>
            <!--Manage users & Macros? TODO-->
          </div>
          <div class="w3-container w3-padding w3-large w3-center w3-text-grey">
            Images
          </div>
          <div class="w3-container w3-padding">
            <select id="csIntImages" onchange="CT.loadSettingsImage();" class="w3-select"></select>
            <label class="w3-text-grey w3-small" for="csIntImages">Internal Images</label><br/>
            <div align="center">
              <a href="javascript:CT.loadImageStart();" class="w3-button fas fa-file-upload"></a>&nbsp;
              <a href="javascript:CT.copyImageName();" class="w3-button far fa-copy"></a>&nbsp;
              <a href="javascript:CT.imageDelete();" class="w3-button far fa-trash-alt"></a><input type="file" id="csImageFile" onchange="CT.loadImage(event);" style="display:none;" accept='image/*'></input><br/><br/>
              <img id="csIntImg" style="max-height:250px;max-width:300px;"></img><br/><br/>
            </div>
          </div>
          <div class="w3-container w3-padding w3-large w3-center w3-text-grey">
            Calendar
          </div>
          <div class="w3-container w3-padding csTab">
            <div class="w3-container" style="width:100%;text-align:center;"><span class="w3-tiny w3-text-red" >Do NOT modify these settings on an existing save as they have the potential to break scheduled events.</span></div>
            <div class="w3-row" id="csCalCustom">
              <div class="w3-third w3-padding-small">
                <h5 align="center">Year</h5>
                <input type="number" class="w3-input" id="csYear" title="Initial year for a campaign." step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setYear();"/>
                <label  class="w3-text-grey w3-small" for="csYear">Starting Year</label>
              </div>
              <div class="w3-third w3-padding-small">
                <h5 align="center">Months</h5>
                <div class="w3-row">
                  <div class="w3-quarter">
                    <input type="number" class="w3-input w3-border-right" id="csMonths" title="Number of months in a year." step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setMonths();"/>
                    <label  class="w3-text-grey w3-small" for="csMonths"># Months</label>
                  </div>
                  <div class="w3-rest">
                    <select class="w3-select" id="csMonthList" title="Select a specific month to modify it's&#013;properties." onchange="CT.csCalChangeMonth();"></select>
                    <label class="w3-text-grey w3-small">Month</label>
                  </div>
                </div>
                <input type="text" class="w3-input" id="csMonthName" onchange="Calendar.setMonthName();"/>
                <label  class="w3-text-grey w3-small" for="csMonthName">Month Name</label>
                <input type="number" class="w3-input" id="csMonthDays" step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setMonthDays();"/>
                <label  class="w3-text-grey w3-small" for="csMonths">Days in Month</label>
                <input type="text" class="w3-input" id="csMonthSeason" placeholder="Coming soon&trade;"/>
                <label  class="w3-text-grey w3-small" for="csMonths">Month's Season</label>
              </div>
              <div class="w3-third w3-padding-small">
                <h5 align="center">Week</h5>
                <div class="w3-row">
                  <div class="w3-quarter">
                    <input type="number" class="w3-input w3-border-right" id="csWeekdays" step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setWeekdays();"/>
                    <label  class="w3-text-grey w3-small" for="csWeekdays"># Days</label>
                  </div>
                  <div class="w3-rest">
                    <select class="w3-select" id="csWeekdayList" onchange="CT.csCalChangeWeekday();"></select>
                    <label class="w3-text-grey w3-small" for="csWeekdayList">Day</label>
                  </div>
                </div>
                <input type="text" class="w3-input" id="csWeekdayName" onchange="Calendar.setWeekdayName();"/>
                <label  class="w3-text-grey w3-small" for="csWeekdayName">Day Name</label>
              </div>
            </div>
          </div>
        </div>
        <footer class="w3-container w3-padding-small">
          <div class="w3-right">
            <a class="w3-button" href="javascript:void(0);">Cancel</a>
            <a class="w3-button" href="javascript:void(0);">Ok</a>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
