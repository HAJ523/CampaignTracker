<html>
  <head>
    <title>Campaign Tracker</title>
    <link rel="shortcut icon" type="image/png" href="CT.ico">

    <!-- Leaflet Mapping -->
    <link rel="stylesheet" href="JS\lib\leafletLegacy\leaflet.css"/>
    <script src="JS\lib\leafletLegacy\leaflet-src.js"></script>
      <!-- Leaflet Pluggins -->
      <link rel="stylesheet" href="JS\lib\leafletLegacy\plugins\leaflet.draw.css" />
      <script src="JS\lib\leafletLegacy\plugins\leaflet.draw.js"></script>
      <link rel="stylesheet" href="JS\lib\leafletLegacy\plugins\measurecontrol.css" />
      <script src="JS\lib\leafletLegacy\plugins\measurecontrol.js"></script>

    <!-- Wiki to HTML for Journal Display -->
    <script src="JS\lib\wiki2html.js"></script>
    <!-- Other Libraries -->
    <script src="JS\lib\array.js"></script>

    <!-- Core Campaign Tracker Routines -->
    <script src="JS\CT.js"></script>
    <script src="JS\calendar.js"></script>
    <script src="JS\keyboard.js"></script>
    <script src="JS\journal.js"></script>
    <script src="JS\map.js"></script>
    <script src="JS\roller.js"></script>
    <script src="JS\generator.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS\W3.css">
    <link rel="stylesheet" type="text/css" href="CSS\fontawesome-all.min.css">
    <link rel="stylesheet" type="text/css" href="CSS\w3-theme-teal.css">
    <link rel="stylesheet" type="text/css" href="CSS\default2.css"
  </head>
  <body onload="CT.onload();CT.changeDisplay('Journal');">

    <!-- Responsive Container -->
    <div class="l-fit-height">
    <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-row">
            <div class="w3-rest w3-theme-d3">
              <div class="w3-left">
                <a class="w3-bar-item w3-button w3-padding-small fa fa-bars" href="javascript:void(0)" title="Menu"></a> <!-- TODO add menu open.-->
                <b><span class="w3-bar-item w3-padding-small" id="ctTitle">Campaign Tracker</span></b>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-book" href="javascript:CT.changeDisplay('Journal');" title="Journal"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-map" href="javascript:CT.changeDisplay('Map');" title="Map"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-calendar-alt" href="javascript:CT.ynModal('TestA','Are you sure you want to test me?',CT.testAlert);" title="Calendar"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-random" href="javascript:void(0)" title="Generators"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-download" href="javascript:void(0)" title="Save"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-upload" href="javascript:CT.loadFile();" title="Load"></a><input type="file" id="ifLoad" onchange="CT.readFile(event);" accept=".json" style="display:none;"></input>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-cog" href="javascript:CT.settings();" title="Settings"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-question" href="javascript:CT.changeDisplay('Help');" title="Help"></a>
              </div>
              <div class="w3-display-topmiddle" id="ctPageTitle"></div>
              <div class="w3-right">
                <a class="w3-bar-item w3-button w3-padding-small fa fa-stopwatch" href="javascript:void(0)" title="Countdown"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-plus" href="javascript:void(0)" title="Increment Clock"></a>
                1492-05-29 09:10&nbsp;
              </div>
            </div>
        </div>
      </div>
    </section>
    <section class="l-fit-height-row-expanded">
        <div class="l-fit-height-row-content l-scroll">
            <div class="l-scroll-content">
              <div class="w3-row">
                <div class="w3-col w3-padding-small" style="overflow-y: auto;height:100%;width:15%;">
                  <input type="text" class="w3-input w3-tiny w3-padding-small" id="ctPageSearch" placeholder="Search or New 'Parent/Child'..." onkeyup="CT.filterTree(event);" onfocusout="CT.filterTree({key:'Escape'})"></input>
                  <div>
                    <ul class="w3-ul w3-tiny w3-hoverable" id="ctPageTree">
                    </ul>
                  </div>
                </div>
                <div class="w3-rest">

                  <!-- Journal Page Display -->
                  <div id="JournalTable" class="w3-row e3-hide">
                      <div id="JournalEditor" class="w3-third">
                        <textarea id="taJournalEditor" oninput="Journal.onInput('taJournalEditor','JournalDisplay');" class="w3-input w3-border" style="height:100%;" placeholder="Input..."></textarea>
                      </div>
                      <div id="JournalContainer" class="w3-rest w3-padding-small" style="overflow-y:scroll; height:100%;"><div id="JournalDisplay"></div>
                      </div>
                  </div>

                  <!-- Map Display -->
                  <div id="MapDiv" class="w3-display-container w3-hide" style="width:100%;height:100%;z-index:1;">
                    <div id="LeafletDiv" style="width:100%;height:100%;">
                      <span id="MapText" class="w3-display-middle">Update page properties with map information.</span>
                    </div>
                  </div>

                  <!-- Help Display -->
                  <div id="HelpDiv" class="w3-display-container w3-hide">
                    <span class="w3-display-middle">Coming Soon&trade;</span>
                  </div>

                <div>
              </div>
            </div>
        </div>
    </section>
    <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-row">
            <div class="w3-rest w3-theme">
              <div class="w3-left" id="ctStatus"></div>
              <div class="w3-right" id="ctClock"></div>
            </div>
          </div>
        </div>
    </section>
  </div>

  <div id="ynModal" class="w3-modal"> <!-- No onclick as this modal should block. -->
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <div class="w3-row w3-theme-d4">
        <div class="w3-rest">
          <div class="w3-left">
            &nbsp;<span id="ynHeader">Test Header</span>
          </div>
          <div class="w3-right">
            <a href="javascript:CT.ynModalCallback(1);" class="w3-bar-item w3-button w3-padding-small fa fa-check" id="ynYes"></a>
            <a href="javascript:CT.ynModalCallback(0);" class="w3-bar-item w3-button w3-padding-small fa fa-ban" id="ynNo"></a>
          </div>
        </div>
      </div>
      <div class="w3-container w3-padding" align="center">
        <span id="ynQuestion">A page like this already exists do you want to overwrite it?</span>
      </div>
    </div>
  </div>

  <div id="csModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Campaign Settings</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.saveSettings();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
        </div>
      </header>

      <div class="w3-bar w3-border-bottom w3-theme-d3">
        <a href="javascript:CT.settingsTab('Main');" class="w3-bar-item w3-button csMenu" id="csMenuMain">Main</a>
        <a href="javascript:CT.settingsTab('Journal');" class="w3-bar-item w3-button csMenu" id="csMenuJournal">Journal</a>
        <a href="javascript:CT.settingsTab('Image');" class="w3-bar-item w3-button csMenu" id="csMenuImage">Image</a>
        <a href="javascript:CT.settingsTab('Calendar');" class="w3-bar-item w3-button csMenu" id="csMenuCalendar">Calendar</a>
      </div>

      <div class="w3-container w3-padding csTab" align="center" id="csTabMain">
        <input type="text" class="w3-input" id="csName" placeholder="Campaign Title" title="The name of the campaign. This will&#013;influence the save file name." style="width:50%;"></input><br/>
        <input type="text" class="w3-input" id="csDefaultDice" placeholder="Default Dice" title="When adding a roll link this will be&#013;added to the beginning of rolls which&#013;start with -/+ to make them valid rolls.&#013;(Ex. '1d20' or '2d6')" style="width:25%;"></input></br>
      </div>

      <div class="w3-container w3-padding csTab" align="center" id="csTabJournal">
        Coming Soon&trade;
      </div>

      <div class="w3-container w3-padding csTab" align="center" id="csTabImage">
        <input type="text" class= "w3-input" id="csLocImgPath" placeholder="Local Image Path" title="The path to prepend to local images.&#013;(Ex. 'C:\Users\User\Pictures\')" style="width:50%;"></input>
        <br/>Internal Images:<br/>
        <select id="csIntImages" onchange="CT.loadSettingsImage();" class="w3-select" style="width:50%;"></select><br/>

        <a href="javascript:CT.loadImageStart();" class="w3-button w3-theme-d1">Load</a>&nbsp;
        <a href="javascript:CT.copyImageName();" class="w3-button w3-theme-d1" onclick="">Copy</a>&nbsp;
        <a href="javascript:CT.imageDelete();" class="w3-button w3-theme-d1">Delete</a><input type="file" id="csImageFile" onchange="CT.loadImage(event);" style="display:none;" accept='image/*'></input><br/>
        <img id="csIntImg" style="max-height:250px;max-width:300px;"></img><br/><br/>
      </div>

      <div class="w3-container w3-padding csTab" align="center" id="csTabCalendar">
        Coming Soon&trade;
      </div>
    </div>
  </div>

  <div id="ppModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Page Properties</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.savePage();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
          <a href="javascript:CT.deletePage();" class="w3-xxlarge w3-button fa fa-trash-alt" title="Delete"></a>
        </div>
      </header>
      <div class="w3-container w3-padding" align="center">
        <input type="text" id="ppPath" class="w3-input" style="width:50%;" placeholder="Full Path" title="(Ex. 'World/Waterdeep/Sewers')"></input><input type="hidden" id="ppPathOriginal" style="display:none;"></input>
        <div class="w3-row" style="width:50%">
            <div class="w3-quarter w3-padding-small"><a href="javascript:Map.chooseMapFile();" class="w3-button w3-theme-d1" id="ppMap">Map File</a><input type="file" id="ppMapFile" onchange="Map.loadMapFile(event);" style="display:none;" accept="image/*"></input></div>
            <div class="w3-quarter w3-padding-small"><input type="text" class="w3-input" placeholder="Width" id="ppMapWidth" title="Width in pixels."></input></div>
            <div class="w3-quarter w3-padding-small"><input type="text" class="w3-input" placeholder="Height" id="ppMapHeight" title="Height in pixels."></input></div>
            <div class="w3-quarter w3-padding-small"><input type="text" class="w3-input" placeholder="PPU" id="ppMapPPU" title="Pixels per unit."></input></div>
        </div>
        <span id="ppMapFileDisplay"></span>
      </div>
    </div>
  </div>

  <div id="mpModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Marker Properties</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.saveMarker();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
          <a href="javascript:void(0);" class="w3-xxlarge w3-button fa fa-trash-alt" title="Delete"></a>
        </div>
      </header>
      <div class="w3-container w3-padding" align="center">
        <span id="mpID"></span>
        <input type="text" id="mpLink" class="w3-input" style="width:50%;"></input>
        </div>
      </div>
    </div>
  </div>

  <div id="idBackground" onclick="this.style.display='none';" style="display:none;">
    <div id="idDisplay">
      <div id="idContent"><img id="idImg"><img></div>
    </div>
  </div>

  </body>
</html>
