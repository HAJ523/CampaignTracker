<html>
  <head>
    <title>Campaign Tracker</title>
    <link rel="shortcut icon" type="image/png" href="CT.ico">

    <!-- Leaflet Mapping -->
    <link rel="stylesheet" href="JS\lib\leafletLegacy\leaflet.css"/>
    <script src="JS\lib\leafletLegacy\leaflet-src.js"></script>
      <!-- Leaflet Pluggins -->
      <link rel="stylesheet" href="JS\lib\leafletLegacy\plugins\leaflet.draw.css" />
      <script src="JS\lib\leafletLegacy\plugins\leaflet.draw.js"></script>
      <link rel="stylesheet" href="JS\lib\leafletLegacy\plugins\measurecontrol.css" />
      <script src="JS\lib\leafletLegacy\plugins\measurecontrol.js"></script>

    <!-- Wiki to HTML for Journal Display -->
    <script src="JS\lib\wiki2html.js"></script>
    <!-- Other Libraries -->
    <script src="JS\lib\array.js"></script>

    <!-- Core Campaign Tracker Routines -->
    <script src="JS\CT.js"></script>
    <script src="JS\calendar.js"></script>
    <script src="JS\keyboard.js"></script>
    <script src="JS\journal.js"></script>
    <script src="JS\map.js"></script>
    <script src="JS\roller.js"></script>
    <script src="JS\generator.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS\W3.css">
    <link rel="stylesheet" type="text/css" href="CSS\fontawesome-all.min.css">
    <link rel="stylesheet" type="text/css" href="CSS\w3-theme-teal.css">
    <link rel="stylesheet" type="text/css" href="CSS\default2.css">
  </head>
  <body onload="CT.onload();CT.changeDisplay('Journal');">

    <!-- Responsive Container -->
    <div class="l-fit-height" style="z-index:0;">
    <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-display-container w3-theme-d3">
            <div> <!-- No class necessary top left is default. -->
                <a class="w3-bar-item w3-button w3-padding-small fa fa-bars" href="javascript:void(0)" title="Menu"></a> <!-- TODO add menu open.-->
                <b><span class="w3-bar-item w3-padding-small" id="ctTitle">Campaign Tracker</span></b>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-book" href="javascript:CT.changeDisplay('Journal');" title="Journal"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-map" href="javascript:CT.changeDisplay('Map');" title="Map"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-calendar-alt" href="javascript:CT.ynModal('TestA','Are you sure you want to test me?',CT.testAlert);" title="Calendar"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-random" href="javascript:void(0)" title="Generators"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-download" href="javascript:CT.saveFile();" title="Save"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-upload" href="javascript:CT.loadFile();" title="Load"></a><input type="file" id="ifLoad" onchange="CT.readFile(event);" accept=".json" style="display:none;"></input>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-cog" href="javascript:CT.settings();" title="Settings"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-question" href="javascript:CT.changeDisplay('Help');" title="Help"></a>
              <div class="w3-display-topmiddle" id="ctPageTitle"></div>
              <div class="w3-display-topright">
                <a class="w3-bar-item w3-button w3-padding-small fa fa-clock" href="javascript:void(0)" title="Countdown"></a>
                <a class="w3-bar-item w3-button w3-padding-small fa fa-stopwatch" href="javascript:void(0)" title="Timer"></a>
                <div class="w3-dropdown-click">
                  <a href="javascript:CT.toggleShow('ctIncDD');" class="w3-button w3-padding-small fa fa-plus" title="Increment Clock"></a>
                  <div class="w3-dropdown-content w3-card-4 w3-padding-small" style="right:0;" id="ctIncDD">
                    <input type="text" id="ctIncrement" class="w3-input" title="Value to increment current date and time&#013;by. Use :&#013;  ##d - Days&#013;  ##h - Hours&#013;  ##m - Minutes&#013;  ##s - Seconds" onkeyup="CT.incrementDate();"/>
                    <label class="w3-text-grey w3-small" for="tbInput" id="tbLabel">Increment</label>
                    <div id="qbIncrement">Quick Buttons Here!</div>
                  </div>
                </div>

                <span id="ctGameTime">TEST-OO-OO OO:OO</span>&nbsp;
              </div>
            </div>
        </div>
      </div>
    </section>
    <section class="l-fit-height-row-expanded">
        <div class="l-fit-height-row-content l-scroll">
            <div class="l-scroll-content">
              <div class="w3-row">
                <div class="w3-col w3-padding-small" style="overflow-y: auto;height:100%;width:15%;">
                  <input type="text" class="w3-input w3-tiny w3-padding-small" id="ctPageSearch" placeholder="Search or New 'Parent/Child'..." onkeyup="CT.filterTree(event);" onfocusout="CT.filterTree({key:'Escape'})"></input>
                  <div>
                    <ul class="w3-ul w3-tiny w3-hoverable" id="ctPageTree">
                    </ul>
                  </div>
                </div>
                <div class="w3-rest">

                  <!-- Journal Page Display -->
                  <div id="JournalTable" class="w3-row e3-hide" style="z-index:1;">
                      <div id="JournalEditor" class="w3-third">
                        <textarea id="taJournalEditor" oninput="Journal.onInput('taJournalEditor','JournalDisplay');" class="w3-input w3-border" style="height:100%;" placeholder="Input..."></textarea>
                      </div>
                      <div id="JournalContainer" class="w3-rest w3-padding-small" style="overflow-y:scroll; height:100%;"><div id="JournalDisplay"></div></div>
                      </div>
                  </div>

                  <!-- Map Display -->
                  <div id="MapDiv" class="w3-display-container w3-hide" style="width:100%;height:100%;z-index:1;">
                    <div id="LeafletDiv" style="width:100%;height:100%;">
                      <span id="MapText" class="w3-display-middle">Update page properties with map information.</span>
                    </div>
                  </div>

                  <!-- Help Display -->
                  <div id="HelpDiv" class="w3-display-container w3-hide">
                    <span class="w3-display-middle">Coming Soon&trade;</span>
                  </div>

                <div>
              </div>
            </div>
        </div>
    </section>
    <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          <div class="w3-row">
            <div class="w3-rest w3-theme">
              <div class="w3-left" id="ctStatus"></div>
              <div class="w3-right" id="ctClock"></div>
            </div>
          </div>
        </div>
    </section>
  </div>

  <div id="tbModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}"> <!-- Text entry with quick buttons -->
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <div class="w3-row w3-theme-d4">
        <div class="w3-rest">
          <div class="w3-left">
            &nbsp;<span id="tbHeader">Test Header</span>
          </div>
          <div class="w3-right">
            <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-small fa fa-save" id="tbSave"></a>
          </div>
        </div>
      </div>
      <div class="w3-container w3-padding">
        <input type="text" id="tbInput" title="Nothing" class="w3-input"/>
        <label class="w3-text-grey w3-small" for="tbInput" id="tbLabel">Text</label><div id="tbQuick"></div>
      </div>
    </div>
  </div>

  <div id="ynModal" class="w3-modal"> <!-- No onclick as this modal should block. -->
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <div class="w3-row w3-theme-d4">
        <div class="w3-rest">
          <div class="w3-left">
            &nbsp;<span id="ynHeader">Test Header</span>
          </div>
          <div class="w3-right">
            <a href="javascript:CT.ynModalCallback(1);" class="w3-bar-item w3-button w3-padding-small fa fa-check" id="ynYes"></a>
            <a href="javascript:CT.ynModalCallback(0);" class="w3-bar-item w3-button w3-padding-small fa fa-ban" id="ynNo"></a>
          </div>
        </div>
      </div>
      <div class="w3-container w3-padding" align="center">
        <span id="ynQuestion">A page like this already exists do you want to overwrite it?</span>
      </div>
    </div>
  </div>

  <div id="csModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Campaign Settings</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.saveSettings();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
        </div>
      </header>

      <div class="w3-bar w3-border-bottom w3-theme-d3">
        <a href="javascript:CT.settingsTab('Main');" class="w3-bar-item w3-button csMenu" id="csMenuMain">Main</a>
        <a href="javascript:CT.settingsTab('Journal');" class="w3-bar-item w3-button csMenu" id="csMenuJournal">Journal</a>
        <a href="javascript:CT.settingsTab('Image');" class="w3-bar-item w3-button csMenu" id="csMenuImage">Image</a>
        <a href="javascript:CT.settingsTab('Calendar');" class="w3-bar-item w3-button csMenu" id="csMenuCalendar">Calendar</a>
      </div>

      <div class="w3-container w3-padding csTab" id="csTabMain">
        <input type="text" class="w3-input" id="csName" title="The name of the campaign. This will&#013;influence the save file name."></input>
        <label class="w3-text-grey w3-small" for="csName">Campaign Name</label>
        <input type="text" class="w3-input" id="csDefaultDice" title="When adding a roll link this will be&#013;added to the beginning of rolls which&#013;start with -/+ to make them valid rolls.&#013;(Ex. '1d20' or '2d6')"></input>
        <label class="w3-text-grey w3-small"for="csDefaultDice">Default Dice</label>
      </div>

      <div class="w3-container w3-padding csTab" align="center" id="csTabJournal">
        Coming Soon&trade;
      </div>

      <div class="w3-container w3-padding csTab" id="csTabImage">
        <input type="text" class= "w3-input" id="csLocImgPath" title="The path to prepend to local images.&#013;(Ex. 'C:\Users\User\Pictures\')"></input>
        <label class="w3-text-grey w3-small" for="csLocImgPath">Local Image Filepath</label>

        <select id="csIntImages" onchange="CT.loadSettingsImage();" class="w3-select"></select>
        <label class="w3-text-grey w3-small" for="csIntImages">Internal Images</label><br/>
        <div align="center">
          <a href="javascript:CT.loadImageStart();" class="w3-button w3-theme-d1">Load</a>&nbsp;
          <a href="javascript:CT.copyImageName();" class="w3-button w3-theme-d1" onclick="">Copy</a>&nbsp;
          <a href="javascript:CT.imageDelete();" class="w3-button w3-theme-d1">Delete</a><input type="file" id="csImageFile" onchange="CT.loadImage(event);" style="display:none;" accept='image/*'></input><br/><br/>
          <img id="csIntImg" style="max-height:250px;max-width:300px;"></img><br/><br/>
        </div>
      </div>

      <div class="w3-container w3-padding csTab" id="csTabCalendar">
        <div class="w3-container" style="width:100%;text-align:center;"><span class="w3-tiny w3-text-red" >Do NOT modify these settings on an existing save as they have the potential to break scheduled events.</span></div>
        <div class="w3-row" id="csCalCustom">
          <div class="w3-third w3-padding-small">
            <h4 align="center">Year</h4>
            <input type="number" class="w3-input" id="csYear" title="Initial year for a campaign." step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setYear();"/>
            <label  class="w3-text-grey w3-small" for="csYear">Starting Year</label>
          </div>
          <div class="w3-third w3-padding-small">
            <h4 align="center">Months</h4>
            <div class="w3-row">
              <div class="w3-quarter">
                <input type="number" class="w3-input w3-border-right" id="csMonths" title="Number of months in a year." step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setMonths();"/>
                <label  class="w3-text-grey w3-small" for="csMonths"># Months</label>
              </div>
              <div class="w3-rest">
                <select class="w3-select" id="csMonthList" title="Select a specific month to modify it's&#013;properties." onchange="CT.csCalChangeMonth();"></select>
                <label class="w3-text-grey w3-small">Month</label>
              </div>
            </div>
            <input type="text" class="w3-input" id="csMonthName" onchange="Calendar.setMonthName();"/>
            <label  class="w3-text-grey w3-small" for="csMonthName">Month Name</label>
            <input type="number" class="w3-input" id="csMonthDays" step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setMonthDays();"/>
            <label  class="w3-text-grey w3-small" for="csMonths">Days in Month</label>
            <input type="text" class="w3-input" id="csMonthSeason" placeholder="Coming soon&trade;"/>
            <label  class="w3-text-grey w3-small" for="csMonths">Month's Season</label>
          </div>
          <div class="w3-third w3-padding-small">
            <h4 align="center">Week</h4>
            <div class="w3-row">
              <div class="w3-quarter">
                <input type="number" class="w3-input w3-border-right" id="csWeekdays" step="1" onkeypress="return event.charCode >= 48 && event.charCode <= 57" onchange="Calendar.setWeekdays();"/>
                <label  class="w3-text-grey w3-small" for="csWeekdays"># Days</label>
              </div>
              <div class="w3-rest">
                <select class="w3-select" id="csWeekdayList" onchange="CT.csCalChangeWeekday();"></select>
                <label class="w3-text-grey w3-small" for="csWeekdayList">Day</label>
              </div>
            </div>
            <input type="text" class="w3-input" id="csWeekdayName" onchange="Calendar.setWeekdayName();"/>
            <label  class="w3-text-grey w3-small" for="csWeekdayName">Day Name</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="ppModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Page Properties</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.savePage();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
          <a href="javascript:CT.deletePage();" class="w3-xxlarge w3-button fa fa-trash-alt" title="Delete"></a>
        </div>
      </header>
      <div class="w3-container w3-padding" align="center">
        <input type="text" id="ppPath" class="w3-input" style="width:50%;" title="(Ex. 'World/Waterdeep/Sewers')"/><input type="hidden" id="ppPathOriginal" style="display:none;"/>
        <label class="w3-text-grey w3-small" for="ppPath">Full Page Path</label>
        <div class="w3-row" style="width:50%">
            <div class="w3-quarter w3-padding-small"><a href="javascript:Map.chooseMapFile();" class="w3-button w3-theme-d1" id="ppMap">Map File</a><input type="file" id="ppMapFile" onchange="Map.loadMapFile(event);" style="display:none;" accept="image/*"/></div>
            <div class="w3-quarter w3-padding-small">
              <input type="text" class="w3-input" id="ppMapWidth" title="Width in pixels."/>
              <label class="w3-text-grey w3-small" for="ppMapWidth">Pixel Width</label>
            </div>
            <div class="w3-quarter w3-padding-small">
              <input type="text" class="w3-input" id="ppMapHeight" title="Height in pixels."/>
              <label class="w3-text-grey w3-small" for="ppMapHeight">Pixel Height</label>
            </div>
            <div class="w3-quarter w3-padding-small">
              <input type="text" class="w3-input" id="ppMapPPU" title="Pixels per unit."/>
              <label class="w3-text-grey w3-small" for="ppMapPPU">Pixels Per Unit</label>
            </div>
        </div>
        <span id="ppMapFileDisplay"></span>
      </div>
    </div>
  </div>

  <div id="mpModal" class="w3-modal" onclick="if (event.target===this) {this.style.display='none';}">
    <div class="w3-modal-content w3-card-4 w3-animate-top">
      <header class="w3-container w3-theme-d4">
        <h3>Marker Properties</h3>
        <div class="w3-display-topright">
          <a href="javascript:CT.saveMarker();" class="w3-xxlarge w3-button fa fa-save" title="Save"></a>
          <a href="javascript:void(0);" class="w3-xxlarge w3-button fa fa-trash-alt" title="Delete"></a>
        </div>
      </header>
      <div class="w3-container w3-padding" align="center">
        <span id="mpID"></span>
        <input type="text" id="mpLink" class="w3-input"/>
        <label class="w3-text-grey w3-small" for="mpLink">Page Link</label>
        </div>
      </div>
    </div>
  </div>

  <div id="idBackground" onclick="this.style.display='none';" style="display:none;">
    <div id="idDisplay">
      <div id="idContent"><img id="idImg"><img></div>
    </div>
  </div>

  </body>
</html>
